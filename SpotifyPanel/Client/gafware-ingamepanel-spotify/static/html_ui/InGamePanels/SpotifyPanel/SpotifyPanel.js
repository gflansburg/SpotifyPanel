(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,c=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw c}}}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function r(){return r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=o(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},r.apply(this,arguments)}function o(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function u(e){var t=y();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}function f(e){var t="function"==typeof Map?new Map:void 0;return f=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return p(e,arguments,h(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),d(r,e)},f(e)}function p(e,t,n){return p=y()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&d(o,n.prototype),o},p.apply(null,arguments)}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var v,m;try{v=TemplateElement}catch(e){parent&&parent.window&&parent.window.test_environment&&(v=function(e){l(n,e);var t=u(n);function n(e){return a(this,n),t.call(this,e)}return i(n,[{key:"connectedCallback",value:function(){}},{key:"disconnectedCallback",value:function(){}}]),n}(f(HTMLElement)))}try{m=checkAutoload}catch(e){parent&&parent.window&&parent.window.test_environment&&(m=function(){})}var b=function(e){l(n,e);var t=u(n);function n(){var e;return a(this,n),(e=t.apply(this,arguments)).panelActive=!1,e.ingameUi=null,e.collapsed=!1,e.collapse_hotkey=-1,e.collapse_altKey=!1,e.collapse_ctrlKey=!1,e.collapse_shiftKey=!1,e}return i(n,[{key:"collapse",value:function(e){e?this.classList.add("collapsed"):this.classList.remove("collapsed"),this.collapsed=e}},{key:"toggle_collapse",value:function(){this.collapse(!this.collapsed)}},{key:"set_brightness",value:function(e){document.querySelector("#overlay_brightness").style.opacity=(100-e)/100;var t=document.querySelector("#overlay_red");t.style.filter="brightness("+e+"%)",t.style.opacity=-.003*e+1}},{key:"set_red_light",value:function(e){var t=document.querySelector("#SpotifyPanel");t&&(e?t.classList.add("red"):t.classList.remove("red"))}},{key:"connectedCallback",value:function(){var e=this;r(h(n.prototype),"connectedCallback",this).call(this);var t=this;window.addEventListener("message",(function(e){try{var n=JSON.parse(e.data);switch(n.type){case"KeyboardEvent":if(-1==t.collapse_hotkey)return;"keydown"==n.data.type&&n.data.keyCode==t.collapse_hotkey&&n.data.altKey==t.collapse_altKey&&n.data.ctrlKey==t.collapse_ctrlKey&&n.data.shiftKey==t.collapse_shiftKey&&t.toggle_collapse();break;case"HotkeyConfiguration":t.collapse_hotkey=n.data.keyCode,t.collapse_altKey=n.data.altKey,t.collapse_ctrlKey=n.data.ctrlKey,t.collapse_shiftKey=n.data.shiftKey;break;case"SetBrighness":t.set_brightness(n.data.brightness);break;case"SetRedLight":t.set_red_light(n.data.red)}}catch(e){}})),window.addEventListener("keydown",(function(e){-1!=t.collapse_hotkey&&e.keyCode==t.collapse_hotkey&&e.altKey==t.collapse_altKey&&e.ctrlKey==t.collapse_ctrlKey&&e.shiftKey==t.collapse_shiftKey&&t.toggle_collapse()})),setTimeout((function(){e.ingameUi=e.querySelector("ingame-ui"),e.content_iframe=document.getElementById("content_iframe"),e.warning_message=document.getElementById("warning_message"),e.ingameUi&&(e.ingameUi.addEventListener("panelActive",(function(e){t.panelActive=!0,t.warning_message.classList.add("show"),t.content_iframe&&(t.content_iframe.src="http://127.0.0.1:5150/index.html"),t.collapse(!1)})),e.ingameUi.addEventListener("panelInactive",(function(e){t.panelActive=!1,t.warning_message.classList.remove("show"),t.content_iframe&&(t.content_iframe.src="")})))}),0)}},{key:"disconnectedCallback",value:function(){r(h(n.prototype),"disconnectedCallback",this).call(this)}},{key:"updateImage",value:function(){}}]),n}(v);window.customElements.define("ingamepanel-custom",b),m(),parent&&parent.window&&parent.window.test_environment&&parent.document.addEventListener("testReady",(function(){var e,n=t(document.querySelectorAll("ingame-ui"));try{var r=function(){var t=e.value,n=new Event("panelActive");setTimeout((function(){t.dispatchEvent(n)}),250)};for(n.s();!(e=n.n()).done;)r()}catch(e){n.e(e)}finally{n.f()}}),!1)})();